1 创建vue实例对象

2 初始化生命周期,data,props,methods等,就是合并一些参数

3如果没写render函数,而是使用template模板,要先使用编译器对模板进行编译成ast抽象树,编译器就是就是正则,

遍历ast抽象树对静态节点进行标记,静态节点不会进行dom-diff

将ast抽象树转化成虚拟dom

如果是初次渲染,则会调用render函数将虚拟dom转化成真实dom

不是的话,则会使用dom-diff对同级元素进行比较,并记录其中的差异

到时候对所有的差异做一次整体的更新

这这个过程会涉及到响应式原理

响应式原理

首先一开始对data函数进行遍历拦截,如果是对象的话则进行深度递归拦截
如果是数组的话则重写数组方法并拦截数组原型链.


在get函数中进行依赖收集,其实就是调用dep类的add方法,把依赖扔进队列中,每一个队列都是一个watcher

在set函数中,进行依赖触发其实就是调用dep的notify方法,其实dep就是一个发布订阅模式,所以对数组进行遍历执行去调用watcher的update方法,然后进行dom更新视图.
